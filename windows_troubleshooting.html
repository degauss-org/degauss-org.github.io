<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Microsoft Windows Troubleshooting and Workarounds</title>

<script src="site_libs/header-attrs-2.10/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="shortcut icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/>
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>








<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">DeGAUSS</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="background.html">Background</a>
</li>
<li>
  <a href="available_images.html">Available Images</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Getting Started
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="installing_docker.html">Installing Docker</a>
    </li>
    <li>
      <a href="geocoding.html">Geocoding</a>
    </li>
    <li>
      <a href="geomarker.html">Geomarker Assessment</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Troubleshooting
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="troubleshooting.html">General</a>
    </li>
    <li>
      <a href="windows_troubleshooting.html">Windows</a>
    </li>
    <li>
      <a href="excel.html">Excel Formatting</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Cohort Guides
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="schwartz.html">Schwartz</a>
    </li>
    <li>
      <a href="pepr.html">PEPR</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    More
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="versioning.html">Reproducibility and Versioning</a>
    </li>
    <li>
      <a href="geocoding_api.html">Using DeGAUSS as a Geocoding API</a>
    </li>
    <li>
      <a href="manual_install.html">Manual Geocoder Installation</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/degauss-org">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Microsoft Windows Troubleshooting and Workarounds</h1>

</div>


<p>Compared to running DeGAUSS on a macOS or linux system, there are a few known issues and workarounds for using DeGAUSS on Microsoft Windows:</p>
<div id="specifying-the-pwd-when-binding-a-volume" class="section level2">
<h2>Specifying the <code>$PWD</code> when binding a volume</h2>
<div id="problem" class="section level3">
<h3>Problem</h3>
<p>Calling DeGAUSS results in an error along the lines of:</p>
<pre><code>C:\Program Files\Docker\Docker\Resources\bin\docker.exe: invalid reference format.
See &#39;C:\Program Files\Docker\Docker\Resources\bin\docker.exe run --help&#39;.</code></pre>
<p>or DeGAUSS complains that it cannot find the <code>my_address.csv</code> file within the working directory of <code>/tmp</code></p>
</div>
<div id="solution" class="section level3">
<h3>Solution</h3>
<p>The point of the -v argument is to bind the current directory to the “/tmp” directory inside of the container so that the code inside can find the input files and write the output file back to the current working directory on the host platform.</p>
<p>The Windows Command Line (<code>cmd</code>) does not support the <code>$PWD</code> environment variable and so instead of using that to specify the bind point (<code>-v $PWD:/tmp</code>) you will have to use a Command Line variable, <code>%cd</code>, for example: <code>-v %cd%:/tmp</code> or</p>
<p><code>docker run --rm=TRUE -v "%cd%":/tmp degauss/pepr_roadways:0.3 my_address_file_geocoded.csv</code></p>
<p>Alternatively, you can specify the full path to the folder, substituting <code>/</code> for <code>\</code>. For example: <code>-v  C:/Temp/docker_testing:/tmp</code> or</p>
<p><code>docker run --rm=TRUE -v //c/Users/&lt;your_username&gt;/Desktop://tmp degauss/cchmc_batch_geocoder my_address_file.csv</code></p>
<p>When using Windows PowerShell, by placing the <code>PWD</code> inside curly brackets, you are able to specify the current working directory. For example: <code>${PWD}</code> or</p>
<p><code>docker run --rm -v ${PWD}:/tmp degauss/geocoder:3.0 my_address_file.csv</code></p>
</div>
</div>
<div id="docker-containers-for-windows" class="section level2">
<h2>Docker Containers for Windows</h2>
<div id="problem-1" class="section level3">
<h3>Problem</h3>
<p>Within Windows terminal, trying to pull or run a Docker container results in an error: <code>docker image operating system "linux" cannot be used on this platform</code></p>
</div>
<div id="solution-1" class="section level3">
<h3>Solution</h3>
<p>By default, Docker for Windows is setup to run Windows Containers and is not compatible with Linux Containers. To change this setting, right click on the Docker logo in the toolbar menu and choose <code>Switch to Linux Containers...</code></p>
</div>
</div>
<div id="parallel-computing-on-windows" class="section level2">
<h2>Parallel Computing on Windows</h2>
<div id="problem-2" class="section level3">
<h3>Problem</h3>
<p>When running a DeGAUSS container on Windows it results in an error:</p>
<pre><code>Error in fifo(tempfile(), open = &quot;w+b&quot;, blocking = T) :
  cannot open the connection
Execution halted</code></pre>
</div>
<div id="solution-2" class="section level3">
<h3>Solution</h3>
<p>This error occurs because some Windows platforms cannot support the R code used for parallel computing. Although this option is enabled by default and cannot be changed by the user, a workaround is to set the Docker host to use only 1 CPU. This can be done in the Docker settings panel and will force the container to use only a single thread.</p>
<p><img src="figs/docker_settings_cpu.png" /></p>
</div>
</div>
<div id="insufficient-memory" class="section level2">
<h2>Insufficient Memory</h2>
<div id="problem-3" class="section level3">
<h3>Problem</h3>
<p>DeGAUSS seems to run without reporting any errors, but does not produce an output file. Intermediate directories (Rtmp…, cache, degauss_cache) directories are created, but the program seems to terminate prematurely.</p>
</div>
<div id="solution-3" class="section level3">
<h3>Solution</h3>
<p>If using an older version of Docker built using the Hyper-V engine, you can allocate more memory to Docker to complete the task. From your Docker dashboard, navigate to the settings. Under “Resources” and “Advanced”, adjust the slider to increase the amount of memory available to Docker. More information is available <a href="https://docs.docker.com/docker-for-windows/">here</a>, under “Resources”.</p>
<p><img src="https://docs.docker.com/desktop/windows/images/settings-resources.png" /></p>
<p>However, if your Docker is built using the WSL 2 engine, these options are not available. If you do not see the above screen, you will have to manually allocate more memory to Docker using the instructions found <a href="https://docs.microsoft.com/en-us/windows/wsl/wsl-config#configure-global-options-with-wslconfig">here</a>, under “Configure global options with .wslconfig”.</p>
<pre><code>[wsl2]
kernel=C:\\temp\\myCustomKernel
memory=4GB # Limits VM memory in WSL 2 to 4 GB
processors=2 # Makes the WSL 2 VM use two virtual processors</code></pre>
<p>More information about the WSL 2 version of Docker is provided <a href="https://docs.docker.com/docker-for-windows/wsl/">here</a>.</p>
</div>
</div>
<div id="no-windows-10" class="section level2">
<h2>No Windows 10</h2>
<div id="problem-4" class="section level3">
<h3>Problem</h3>
<p>The only computers available to use DeGAUSS are Windows machines that do not have Windows 10 on them. Docker CE only supports Windows machines with Windows 10 or greater.</p>
</div>
<div id="solution-4" class="section level3">
<h3>Solution</h3>
<p>Install Docker Toolbox, which is a legacy supported solution to using Docker on systems that don’t support Hyper-V: <a href="https://docs.docker.com/toolbox/toolbox_install_windows/" class="uri">https://docs.docker.com/toolbox/toolbox_install_windows/</a></p>
<p>After installation, double-click the Docker Quickstart icon on the Desktop to launch a pre-configured Docker toolbox terminal and proceed as usual.</p>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
